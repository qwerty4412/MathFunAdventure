# .github/workflows/unity_build.yml

name: Unity Build

# This workflow runs when changes are pushed or merged into your specific branch
on:
  push:
    branches:
      - PC-branch-number-2
  pull_request:
    branches:
      - PC-branch-number-2
  workflow_dispatch: # Allows manual trigger from the GitHub Actions tab

# REQUIRED for the runner to access repository files and Git LFS
permissions:
  contents: read

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      # Step 1: Check out the repository code and Git LFS
      - uses: actions/checkout@v4
        with:
          lfs: true

      # Step 2: Set up Unity environment and cache assets
      # *** ACTION PINNED TO COMMIT SHA ***
      - uses: game-ci/unity-setup@dd42746c24393663b15f5c3527b1029c50e495be
        with:
          unity-version: 6000.1.8f1

      # Step 3: Run the build for Windows
      # *** ACTION PINNED TO COMMIT SHA ***
      - uses: game-ci/unity-build@0c16aab1d71329c29809968a356396e00b652875
        with:
          targetPlatform: StandaloneWindows64
          buildName: MathFunAdventure
          # Use the secret license key
          unityLicense: ${{ secrets.UNITY_LICENSE }}
          
      # Step 4: Upload the build artifact
      - uses: actions/upload-artifact@v4
        with:
          name: Build-Windows
          path: build/StandaloneWindows64
