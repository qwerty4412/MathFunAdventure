# .github/workflows/unity_build.yml

name: Unity Build

# This workflow runs when changes are pushed or merged into your specific branch
on:
  workflow_dispatch: # Allows manual trigger from the GitHub Actions tab
  push:
    branches:
      - main
  pull_request:
    branches:
      - main
  

permissions:
  contents: read

jobs:
  build:
    runs-on: ubuntu-latest
    
    # Define the Unity Docker image to use for all subsequent steps in this job
    # This is the final attempt to bypass the network block
    container:
      image: unityci/editor:6000.1.8f1-base-4 
    
    steps:
      # Step 1: Check out the repository code and Git LFS (Must run on the host)
      - uses: actions/checkout@v4
        with:
          lfs: true

      # Step 2: Cache Unity Library (Still using the official GitHub action)
      - name: Cache Unity Library
        uses: actions/cache@v4
        with:
          path: Library
          key: Library-6000.1.8f1-${{ runner.os }}
          restore-keys: |
            Library-6000.1.8f1-

